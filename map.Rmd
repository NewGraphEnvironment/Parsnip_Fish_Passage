---
output: 
  html_document:
    self_contained: true 
 
params:
  set_title: "My Title!"
title: "test map"
date: "`r format(Sys.time(), '%B %Y')`"
---

<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.0/mapbox-gl.css' rel='stylesheet' />
<style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>

<div id='map'></div>

```{js}
mapboxgl.accessToken = 'pk.eyJ1IjoiaGlsbGNyZXN0Z2VvIiwiYSI6IjREMjlhTlkifQ.-fItotK2VgCxPHt4ocoMYA';
var map = new mapboxgl.Map({
container: 'map', // container id
style: 'mapbox://styles/mapbox/light-v10', // stylesheet location
center: [-123.352825, 48.444897], // starting position [lng, lat]
zoom: 12 // starting zoom
});

map.on('load', function() {
    map.addLayer({
    "id": "dirt-streams",
    "type": "line",
    "source":
      {
      "type": "vector",
      "tiles": ['https://www.hillcrestgeo.ca/fwa/v1/mvt/whse_basemapping.fwa_stream_networks_sp/{z}/{x}/{y}'],
      "maxzoom": 18,
      "minzoom": 11
    },
    'source-layer': 'whse_basemapping.fwa_stream_networks_sp',
"layout": {
"line-cap": "round",
"line-join": "round"
},
"paint": {
"line-opacity": 0.6,
"line-color": "#a0c8f0",
"line-width": 2
}
},
'waterway-label');
});

map.on('load', function() {
    map.addLayer({
    "id": "dirt-roads",
    "type": "line",
    "source":
      {
      "type": "vector",
      "tiles": ['https://www.hillcrestgeo.ca/fwa/v1/mvt/whse_basemapping.dra_dgtl_road_atlas_mpar_sp/{z}/{x}/{y}?columns=road_class'],
      "maxzoom": 18,
      "minzoom": 10
    },
    'source-layer': 'whse_basemapping.dra_dgtl_road_atlas_mpar_sp',
 "layout": {"line-join": "round", "line-cap": "round"},
 "filter": ["!in", "road_class", "ferry"],
 "paint": {
 "line-width": [
      "interpolate", ["exponential", 1.5],
                    ["zoom"],
                    5,
                    [
                        "match",
                        ["get", "road_class"],
                        "freeway",
                        0.5,
                        "highway",
                        0.5,
                        "arterial",
                        0.5,
                        "ramp",
                        0.5,
                        "collector",
                        0.5,
                        "local",
                        0,
                        0
                    ],
                    12,
                    [
                        "match",
                        ["get", "road_class"],
                        "freeway",
                        3,
                        "highway",
                        3,
                        "arterial",
                        2,
                        "ramp",
                        3,
                        "collector",
                        2,
                        "local",
                        0.5,
                        0
                    ],
                    18,
                    [
                        "match",
                        ["get", "road_class"],
                        "freeway",
                        30,
                        "highway",
                        30,
                        "arterial",
                        30,
                        "ramp",
                        12,
                        "collector",
                        24,
                        "local",
                        12,
                        0
                    ]
                ],
 "line-color": [
                    "match",
                    ["get", "road_class"],
                    "local",
                    "#595959",
                    "street_limited",
                    "hsl(38, 100%, 98%)",
                    "service",
                    "hsl(38, 100%, 98%)",
                    "track",
                    "hsl(38, 100%, 98%)",
                    "link",
                    "hsl(38, 100%, 98%)",
                    "#595959"
                ]

 },
            "interactive": true

},
);
});

map.addControl(new mapboxgl.NavigationControl());


```